<?xml version="1.0" encoding="UTF-8"?>
<project name="Downloads necessary libraries" default="libraries" basedir=".">
    <target name="clean">
        <delete dir="dist"/>
    </target>
    
    <target name="libraries">
        <antcall target="-library">
            <param name="library" value="junit-4.4"/>
            <param name="url" value="http://switch.dl.sourceforge.net/sourceforge/junit/junit-4.4.jar"/>
        </antcall>
    </target>
    
    <!-- support methods -->
    
    <target name="-library-check">
        <fail message="You need to specify library name" unless="library"/>
        <fail message="You need to specify url" unless="url"/>
        
        <property name="library.jar" location="dist/${library}.jar"/>
        
        <echo message="Checking for ${library.jar}"/>
        <available file="${library.jar}" property="library.available"/>
    </target>
    <target name="-library" depends="-library-check" unless="library.available">
        <mkdir dir="dist"/>
        <get dest="${library.jar}" src="${url}"/>
        
        <fail message="Now the library ${library} should be downloaded">
            <condition>
                <not><available file="${library.jar}"/></not>
            </condition>
        </fail>
    </target>
</project>
